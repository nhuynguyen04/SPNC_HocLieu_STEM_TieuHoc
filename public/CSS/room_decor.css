body, html {
    margin: 0; padding: 0; width: 100%; height: 100%;
    overflow: hidden; /* Chặn cuộn trang */
    font-family: 'Quicksand', sans-serif;
    background: #2c3e50;
}

.game-container {
    display: flex;
    width: 100vw; height: 100vh;
}

/* --- SIDEBAR --- */
.sidebar {
    width: 320px;
    background: #fff;
    display: flex; flex-direction: column;
    border-right: 5px solid #bdc3c7;
    box-shadow: 5px 0 15px rgba(0,0,0,0.1);
    z-index: 20;
}

.logo-area {
    padding: 15px; background: #e67e22; color: white;
    display: flex; align-items: center; gap: 15px;
}
.logo-area h2 { margin: 0; font-size: 1.5em; }
.back-btn { color: white; font-size: 1.2em; text-decoration: none; }

/* Tabs danh mục */
.category-tabs {
    display: flex; flex-wrap: wrap; gap: 5px; padding: 10px;
    background: #fdf2e9; border-bottom: 2px solid #edcbb1;
}
.cat-btn {
    flex: 1 1 45%; /* 2 nút 1 hàng */
    padding: 10px; border: 1px solid #edcbb1;
    background: white; border-radius: 8px;
    cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 5px;
    color: #d35400; transition: all 0.2s;
}
.cat-btn:hover { background: #fff5e6; }
.cat-btn.active { background: #d35400; color: white; border-color: #d35400; }
.cat-btn i { font-size: 1.2em; }

/* Lưới đồ vật */
.items-grid {
    flex: 1; overflow-y: auto; padding: 15px;
    display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;
    background: #fafafa;
}

.item-card {
    background: white; border: 2px solid #eee; border-radius: 10px;
    padding: 10px; text-align: center; cursor: grab;
    transition: transform 0.2s, border-color 0.2s;
}
.item-card:hover { transform: translateY(-3px); border-color: #f39c12; box-shadow: 0 5px 10px rgba(0,0,0,0.1); }
.item-card img { width: 100%; height: 80px; object-fit: contain; }

/* Thùng rác */
.trash-zone {
    padding: 20px; background: #ffebee; color: #c62828;
    text-align: center; font-weight: bold; border-top: 2px dashed #ef9a9a;
}
.trash-zone.drag-over { background: #ffcdd2; transform: scale(1.05); }

/* --- MAIN AREA --- */
.main-area {
    flex: 1; display: flex; flex-direction: column;
    background: url('../images/pattern_bg.png'), #ecf0f1; /* Nền caro hoặc màu */
    position: relative;
}

.top-toolbar {
    padding: 10px 20px; background: white;
    display: flex; justify-content: space-between; align-items: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.theme-selector { display: flex; align-items: center; gap: 10px; }
.color-dot {
    width: 30px; height: 30px; border-radius: 50%; border: 2px solid #ddd;
    cursor: pointer; transition: transform 0.2s;
}
.color-dot:hover { transform: scale(1.2); border-color: #333; }

.tool-btn {
    padding: 8px 15px; border: none; border-radius: 5px;
    cursor: pointer; background: #95a5a6; color: white; font-weight: bold;
    margin-left: 10px;
}
.tool-btn.highlight { background: #2980b9; }

.room-viewport {
    flex: 1; display: flex; justify-content: center; align-items: center;
    overflow: auto;
}

#room-container {
    position: relative;
    width: 900px; height: 650px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    border: 8px solid white; border-radius: 4px;
    background: #ffffff;
    overflow: hidden;
}

.room-bg {
    width: 120%; height: 100%; object-fit: cover;
    position: absolute; z-index: 0;
}

#furniture-layer { 
    width: 100%; height: 100%; 
    position: absolute; 
    z-index: 10; /* Nội thất cao hơn thảm */
    pointer-events: none; 
}

.room-item {
    position: absolute; 
    cursor: grab;
    transform-origin: bottom center;
    transition: filter 0.2s;
    pointer-events: auto;
}
.room-item:active { cursor: grabbing; }
.room-item:hover { filter: drop-shadow(0 0 5px gold); }

.help-text { text-align: center; padding: 10px; color: #7f8c8d; font-size: 0.9em; }


/* Các lớp chứa đồ vật: KHÔNG nhận sự kiện chuột (để click xuyên qua vùng trống) */
#rug-layer { 
    width: 100%; height: 100%; 
    position: absolute; 
    z-index: 5; /* Thảm thấp hơn nội thất */
    pointer-events: none; 
}

/* Container chứa nền */
#room-backgrounds {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    z-index: 0;
    pointer-events: none; /* Không chặn chuột */
}

.bg-layer {
    position: absolute;
    width: 100%; height: 100%;
    object-fit: contain; /* Hoặc cover tuỳ ảnh */
    top: 0; left: 0;
}